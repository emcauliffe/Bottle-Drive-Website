<!DOCTYPE html>
<html>
<title>Bottles Against COVID-19</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    body,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: "Montserrat", sans-serif
    }

    .w3-row-padding img {
        margin-bottom: 12px
    }

    .bgimg {
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        background-image: url('https://github.com/emcauliffe/Bottle-Drive-Website/raw/master/images/home-img.png');
        min-height: 100%;
    }
</style>

<body>

    <!-- Sidebar with image -->
    <nav class="w3-sidebar w3-hide-medium w3-hide-small" style="width:40%">
        <div class="bgimg"></div>
    </nav>

    <!-- Page Content -->
    <div class="w3-main w3-padding-large" style="margin-left:40%">

        <div class="w3-right w3-mobile">
            <a href="/signup" class="w3-button w3-light-grey w3-padding-large w3-margin-top w3-mobile">
                Start your own bottle drive!
            </a>

            <a href="/login" class="w3-button w3-light-grey w3-padding-large w3-margin-top w3-mobile">
                <i class="fa fa-lock w3-hover-opacity"></i> Your Drives
            </a>
        </div>
        <!-- Header -->
        <header class="w3-container w3-center" style="padding:64px 16px" id="home">
            <h1 class="w3-jumbo"><b>Bottles Against COVID-19</b></h1>
            <p>Find bottle drives nearby:</p>
            <div class="w3-container w3-margin-bottom w3-bar">
                <button id="locSearch" onClick="locationSearch()"
                    class="w3-button w3-light-grey w3-bar-item w3-mobile">
                    <i class="fa fa-location-arrow"></i> Search by location (most&nbspaccurate)
                </button>
            </div>
            <br/>
            <div class="w3-container w3-margin-top w3-bar">    
                <input id="postalCode" class="w3-input w3-border w3-round-large w3-bar-item w3-mobile" type="text" placeholder="K1A 0A9">
                <button onClick="postalSearch()" class="w3-button w3-light-grey w3-bar-item w3-mobile">
                    Search by postal code
                </button>
            </div>


        </header>

        <!-- About Section -->
        <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="about">
            <h2>About</h2>
            <hr class="w3-opacity">
            <p>Due to the COVID-19 pandemic, we have all been spending more time at home than normal ... and for most of
                us, this means we've been consuming much more alcohol than before. I wanted to find a way to join
                efforts against COVID-19, and thus, Bottles Against COVID was born.
                Bottles Against COVID is a Westend bottle drive that collects empty bottles and returns them to the beer
                store. 100% of the money received from returns will be donated to St. Joseph's Health Centre COVID-19
                Fund. St. Joe's is a hospital that continually serves our community, and especially during these times,
                it is our duty to give back in any way we can.
            </p>

            <h2>How it works</h2>
            <hr class="w3-opacity">
            <p>Logistics are simple. Once you have collected enough empty bottles to fill a few boxes, please sign up
                for a pick-up date through the posted link. Simply place the box(es) on your front porch, and
                we will come and collect them! CONTACTLESS COLLECTION, OF COURSE!
            </p>

            <h2>Donation Information</h2>
            <hr class="w3-opacity">
            <p>Any donations made will be posted to our Instagram (<a
                    href="https://www.instagram.com/bottlesagainstcovid/">@bottlesagainstcovid</a>) so that everyone can
                stay up to
                date on our progress!
                If you do not have any bottles to donate, please feel free to make your own donation towards St. Joe's
                using <a href="https://secure3.convio.net/stjoca/site/SPageNavigator/westendheroes_home.html">this
                    link</a> :)
            </p>


            <!-- End About Section -->

        </div>

        <!-- Contact Section -->
        <div class="w3-padding-32 w3-content w3-text-grey" id="contact" style="margin-bottom:64px">
            <h2>Contact Us</h2>
            <hr class="w3-opacity">

            <div class="w3-section">
                <p><i class="fa fa-envelope fa-fw w3-xxlarge w3-margin-right"></i> <a
                        href="mailto:mail@bottlesagainstcovid.org">mail@bottlesagainstcovid.org</a></p>
            </div>

            <!-- End Contact Section -->
        </div>

        <!-- Footer -->
        <footer class="w3-container w3-padding-64 w3-light-grey w3-center w3-opacity w3-xlarge" style="margin:-24px">
            <a href="https://www.instagram.com/bottlesagainstcovid/">
                <i class="fa fa-instagram w3-hover-opacity"></i></a>
            <a href="https://github.com/emcauliffe/Bottle-Drive-Website">
                <i class="fa fa-github w3-hover-opacity"></i></a>
            <a href="/login"><i class="fa fa-lock w3-hover-opacity"></i></a>
            <!-- End footer -->
        </footer>
    </div>

</body>

<script>
    function locationSearch() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(result => searchDatabase([result.coords.longitude, result.coords.latitude]), (error) => document.getElementById("locSearch").disabled = true)
        }
    }

    function postalSearch() {
        const postalCode = document.getElementById("postalCode").value

        fetch("https://geogratis.gc.ca/services/geolocation/en/locate?q=" + postalCode.slice(0, 3))
            .then(result => result.json())
            .then(value => searchDatabase(value[0].geometry.coordinates, true))
            .catch(error => console.log(error))
    }

    function searchDatabase(longLatArray, postal) {
        postal = postal || false
        const query = {
            "lat": longLatArray[1],
            "long": longLatArray[0],
            "postal": postal
        }
        window.location.assign(`/search?lat=${query.lat}&long=${query.long}&postal=${postal}`)
    }
</script>

</html>